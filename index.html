<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; connect-src 'self' https://*.supabase.co https://formspree.io; img-src 'self' data:; frame-ancestors 'none';" />
  <title>Polyjump ‚Äì Tournoi de Volley √âtudiant</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #08090d;
      --surface: #111218;
      --s2: #191b24;
      --accent: #f5c518;
      --a2: #ff6b35;
      --text: #f0f0f0;
      --muted: #6b7280;
      --border: rgba(245,197,24,0.15);
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; overflow-x: hidden; padding-top: 70px; }
    body::before {
      content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.35;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    }

    /* NAVBAR */
    .navbar { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(8,9,13,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); padding: 1rem 2rem; display: flex; align-items: center; justify-content: space-between; }
    .navbar-logo { font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; color: var(--accent); letter-spacing: 0.1em; text-decoration: none; }
    .navbar-links { display: flex; gap: 1.5rem; }
    .navbar-links a { color: #9ca3af; font-size: 0.85rem; font-weight: 500; text-decoration: none; transition: color 0.2s; }
    .navbar-links a:hover { color: var(--accent); }

    /* HERO */
    .hero { position: relative; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 2rem; overflow: hidden; }
    .hero-bg { position: absolute; inset: 0; z-index: 0; background: radial-gradient(ellipse 80% 60% at 50% 0%, rgba(245,197,24,0.12) 0%, transparent 70%), radial-gradient(ellipse 50% 40% at 80% 80%, rgba(255,107,53,0.08) 0%, transparent 60%); }
    .court { position: absolute; inset: 0; z-index: 0; opacity: 0.06; overflow: hidden; }
    .court svg { width: 100%; height: 100%; }
    .hero-content { position: relative; z-index: 2; }
    .badge { display: inline-block; background: rgba(245,197,24,0.12); border: 1px solid rgba(245,197,24,0.3); color: var(--accent); font-size: 0.75rem; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; padding: 0.35rem 1rem; border-radius: 999px; margin-bottom: 1.5rem; animation: fadeUp 0.6s ease both; }
    .hero-title { font-family: 'Bebas Neue', sans-serif; font-size: clamp(6rem, 20vw, 16rem); line-height: 0.9; letter-spacing: 0.02em; background: linear-gradient(160deg, #fff 30%, var(--accent) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: fadeUp 0.7s ease 0.1s both; }
    .hero-sub { font-family: 'Bebas Neue', sans-serif; font-size: clamp(1.5rem, 4vw, 3rem); letter-spacing: 0.15em; color: var(--a2); margin-top: 0.25rem; animation: fadeUp 0.7s ease 0.2s both; }
    .hero-meta { display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; margin-top: 2.5rem; animation: fadeUp 0.7s ease 0.3s both; }
    .pill { display: flex; align-items: center; gap: 0.5rem; background: var(--surface); border: 1px solid var(--border); border-radius: 999px; padding: 0.5rem 1.2rem; font-size: 0.9rem; color: #c9cfd8; text-decoration: none; }
    .pill-discord { background: rgba(88,101,242,0.15); border-color: rgba(88,101,242,0.35); color: #a5b4fc; }
    .scroll-hint { position: absolute; bottom: 2.5rem; left: 50%; transform: translateX(-50%); z-index: 2; display: flex; flex-direction: column; align-items: center; gap: 0.4rem; color: var(--muted); font-size: 0.75rem; letter-spacing: 0.1em; text-transform: uppercase; animation: fadeUp 1s ease 0.8s both; }
    .arrow { width: 24px; height: 24px; border-right: 2px solid var(--muted); border-bottom: 2px solid var(--muted); transform: rotate(45deg); animation: bounce 1.5s infinite; }

    /* LAYOUT */
    .wrap { position: relative; z-index: 2; padding: 5rem 2rem; max-width: 1000px; margin: 0 auto; }
    .lbl { font-size: 0.7rem; font-weight: 600; letter-spacing: 0.25em; text-transform: uppercase; color: var(--accent); margin-bottom: 0.75rem; }
    .ttl { font-family: 'Bebas Neue', sans-serif; font-size: clamp(2.5rem, 6vw, 4.5rem); line-height: 1; margin-bottom: 2rem; }
    hr.div { border: none; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 0 2rem; }

    /* COUNTDOWN */
    .cd-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 1rem; max-width: 600px; }
    .cd-box { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem 0.5rem; text-align: center; position: relative; overflow: hidden; }
    .cd-box::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); }
    .cd-n { font-family: 'Bebas Neue', sans-serif; font-size: clamp(2.5rem, 6vw, 4rem); color: var(--accent); line-height: 1; }
    .cd-l { font-size: 0.65rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: var(--muted); margin-top: 0.3rem; }

    /* INFO CARDS */
    .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.25rem; margin-top: 2rem; }
    .info-card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 1.75rem; transition: border-color 0.3s, transform 0.3s; }
    .info-card:hover { border-color: rgba(245,197,24,0.4); transform: translateY(-4px); }
    .info-card .ico { font-size: 2rem; margin-bottom: 1rem; display: block; }
    .info-card h3 { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; letter-spacing: 0.05em; color: var(--accent); margin-bottom: 0.5rem; }
    .info-card p, .info-card ul { color: #9ca3af; font-size: 0.9rem; line-height: 1.7; }
    .info-card ul { list-style: none; }
    .info-card ul li::before { content: '‚ñ∏ '; color: var(--a2); }

    /* PROGRAMME */
    .timeline { margin-top: 2rem; display: flex; flex-direction: column; gap: 0; }
    .tl-item { display: flex; gap: 1.5rem; position: relative; }
    .tl-item::before { content: ''; position: absolute; left: 55px; top: 2rem; bottom: -1px; width: 2px; background: var(--border); }
    .tl-item:last-child::before { display: none; }
    .tl-time { font-family: 'Bebas Neue', sans-serif; font-size: 1.3rem; color: var(--accent); min-width: 55px; padding-top: 0.85rem; text-align: right; flex-shrink: 0; }
    .tl-dot { width: 14px; height: 14px; border-radius: 50%; background: var(--accent); border: 3px solid var(--bg); margin-top: 1.05rem; flex-shrink: 0; z-index: 1; box-shadow: 0 0 0 3px rgba(245,197,24,0.2); }
    .tl-dot.muted { background: var(--s2); border-color: var(--border); box-shadow: none; }
    .tl-content { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 1rem 1.25rem; margin-bottom: 1rem; flex: 1; transition: border-color 0.25s; }
    .tl-content:hover { border-color: rgba(245,197,24,0.3); }
    .tl-content strong { display: block; font-size: 0.95rem; font-weight: 600; color: var(--text); margin-bottom: 0.2rem; }
    .tl-content span { font-size: 0.85rem; color: #9ca3af; }
    .tl-badge { display: inline-block; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; padding: 0.15rem 0.5rem; border-radius: 999px; margin-left: 0.5rem; vertical-align: middle; }
    .badge-sport { background: rgba(245,197,24,0.15); color: var(--accent); }
    .badge-social { background: rgba(52,211,153,0.12); color: #34d399; }
    .badge-cloture { background: rgba(255,107,53,0.12); color: var(--a2); }

    /* TEAMS */
    .teams-head { display: flex; align-items: flex-end; justify-content: space-between; flex-wrap: wrap; gap: 1rem; }
    .teams-cnt { font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; color: var(--muted); }
    .teams-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 0.75rem; margin-top: 1.5rem; }
    .tcard { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 1rem 1.2rem; display: flex; align-items: center; gap: 0.85rem; transition: border-color 0.25s, transform 0.25s; animation: fadeUp 0.4s ease both; }
    .tcard:hover { border-color: rgba(245,197,24,0.4); transform: translateY(-2px); }
    .tnum { font-family: 'Bebas Neue', sans-serif; font-size: 1.5rem; color: var(--accent); min-width: 2rem; text-align: center; }
    .tinfo { flex: 1; overflow: hidden; }
    .tname { font-weight: 600; font-size: 0.95rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .empty-box { text-align: center; padding: 3rem 1rem; color: var(--muted); font-size: 0.9rem; border: 1px dashed rgba(255,255,255,0.07); border-radius: 16px; margin-top: 1.5rem; }

    /* SHARE */
    .share-row { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 1.5rem; }
    .sbtn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.65rem 1.2rem; border-radius: 12px; font-family: 'DM Sans', sans-serif; font-size: 0.88rem; font-weight: 600; cursor: pointer; border: 1px solid var(--border); background: var(--surface); color: var(--text); text-decoration: none; transition: all 0.2s; position: relative; }
    .sbtn:hover { transform: translateY(-2px); border-color: rgba(245,197,24,0.4); }
    .sbtn.wa:hover { border-color: #25d366; color: #25d366; background: rgba(37,211,102,0.08); }
    .sbtn.tw:hover { border-color: #1d9bf0; color: #1d9bf0; background: rgba(29,155,240,0.08); }
    .toast { position: absolute; top: -2rem; left: 50%; transform: translateX(-50%); background: var(--accent); color: #000; font-size: 0.72rem; font-weight: 700; padding: 0.2rem 0.6rem; border-radius: 6px; white-space: nowrap; opacity: 0; transition: opacity 0.2s; pointer-events: none; }
    .toast.on { opacity: 1; }

    /* PLACES */
    .places-wrap { position: relative; z-index: 2; max-width: 700px; margin: 0 auto; padding: 0 2rem 2rem; }
    .places-box { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 1.25rem 1.75rem; display: flex; align-items: center; justify-content: space-between; gap: 1rem; flex-wrap: wrap; }
    .places-ttl { font-size: 0.7rem; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: var(--accent); margin-bottom: 0.3rem; }
    .places-n { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; color: var(--text); }
    .bar-wrap { flex: 1; min-width: 160px; }
    .bar-track { height: 8px; background: var(--s2); border-radius: 999px; overflow: hidden; }
    .bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--a2), var(--accent)); border-radius: 999px; transition: width 0.8s ease; }
    .bar-sub { font-size: 0.75rem; color: var(--muted); margin-top: 0.4rem; text-align: right; }

    /* FORM */
    .form-wrap { position: relative; z-index: 2; padding: 2rem 2rem 5rem; max-width: 700px; margin: 0 auto; }
    .form-card { background: var(--surface); border: 1px solid var(--border); border-radius: 28px; padding: 2.5rem; position: relative; overflow: hidden; }
    .form-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--a2), var(--accent)); }
    .step { display: none; }
    .step.on { display: block; }
    .dots { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 2rem; }
    .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--s2); border: 1px solid var(--muted); transition: all 0.3s; }
    .dot.on { background: var(--accent); border-color: var(--accent); transform: scale(1.3); }
    .dot.done { background: var(--a2); border-color: var(--a2); }
    .dot-line { flex: 1; height: 1px; background: var(--border); }
    .sh { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 0.05em; margin-bottom: 1.5rem; }
    .fg { margin-bottom: 1.25rem; }
    label { display: block; font-size: 0.82rem; font-weight: 500; color: #9ca3af; margin-bottom: 0.4rem; letter-spacing: 0.05em; text-transform: uppercase; }
    input[type=text], input[type=email] { width: 100%; background: var(--s2); border: 1px solid rgba(255,255,255,0.07); border-radius: 12px; padding: 0.85rem 1rem; color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.95rem; outline: none; transition: border-color 0.25s, box-shadow 0.25s; }
    input:focus { border-color: rgba(245,197,24,0.5); box-shadow: 0 0 0 3px rgba(245,197,24,0.08); }
    input::placeholder { color: #4b5563; }
    input.bad { border-color: #f87171 !important; }
    .err { color: #f87171; font-size: 0.8rem; margin-top: 0.3rem; display: none; }
    .err.on { display: block; }
    .pblock { background: var(--s2); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; padding: 1.25rem; margin-bottom: 0.75rem; }
    .pt { font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 0.08em; color: var(--accent); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem; }
    .pn { display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; background: rgba(245,197,24,0.15); border-radius: 50%; font-size: 0.75rem; color: var(--accent); }
    .frow { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
    .mod-box { margin-top: 0.5rem; padding: 0.6rem 0.85rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06); border-radius: 10px; font-size: 0.78rem; color: var(--muted); line-height: 1.5; }
    .pay-box { background: var(--s2); border: 1px solid var(--border); border-radius: 16px; padding: 1.5rem; margin-bottom: 1.5rem; text-align: center; }
    .price { font-family: 'Bebas Neue', sans-serif; font-size: 3.5rem; color: var(--accent); line-height: 1; }
    .price-d { font-size: 0.85rem; color: var(--muted); margin-top: 0.3rem; }
    .pay-row { display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap; margin-top: 1.25rem; }
    .pbtn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.7rem 1.5rem; border-radius: 12px; font-family: 'DM Sans', sans-serif; font-size: 0.9rem; font-weight: 600; cursor: pointer; border: none; transition: all 0.2s; text-decoration: none; }
    .pbtn.prim { background: var(--accent); color: #000; }
    .pbtn.prim:hover { background: #ffd740; transform: translateY(-2px); }
    .pbtn.sec { background: transparent; border: 1px solid var(--border); color: var(--text); }
    .pbtn.sec:hover { border-color: rgba(245,197,24,0.4); background: rgba(245,197,24,0.05); }
    .pstatus { display: none; background: rgba(245,197,24,0.08); border: 1px solid rgba(245,197,24,0.3); border-radius: 12px; padding: 1rem; margin-bottom: 1.25rem; font-size: 0.88rem; color: #d4aa00; text-align: center; }
    .paypal-qr-box { display: none; margin-bottom: 1.25rem; background: rgba(245,197,24,0.06); border: 1px solid rgba(245,197,24,0.2); border-radius: 14px; padding: 1.25rem; }
    .paypal-qr-ttl { font-size: 0.8rem; font-weight: 700; color: var(--accent); letter-spacing: 0.08em; text-transform: uppercase; margin-bottom: 1rem; text-align: center; }
    .paypal-qr-img { text-align: center; margin-bottom: 1.25rem; }
    .paypal-qr-img img { max-width: 200px; border-radius: 12px; border: 2px solid var(--border); background: white; padding: 0.5rem; }
    .paypal-ref-box { background: var(--s2); border-radius: 12px; padding: 1rem; }
    .paypal-ref-txt { font-size: 0.875rem; color: #c9cfd8; line-height: 1.6; margin-bottom: 0.75rem; }
    .paypal-ref-display { background: var(--bg); border-radius: 10px; padding: 0.65rem 1rem; font-family: monospace; font-size: 0.95rem; color: var(--accent); letter-spacing: 0.05em; text-align: center; border: 1px solid rgba(245,197,24,0.2); }
    .paypal-warn { font-size: 0.75rem; color: var(--muted); margin-top: 0.75rem; line-height: 1.5; }
    .pay-confirm-wrap { display: none; margin-bottom: 1.25rem; }
    .btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.9rem 2rem; border-radius: 14px; font-family: 'DM Sans', sans-serif; font-weight: 600; font-size: 0.95rem; cursor: pointer; border: none; transition: all 0.25s; }
    .btn-p { background: linear-gradient(135deg, var(--accent), #e6b800); color: #000; width: 100%; }
    .btn-p:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(245,197,24,0.25); }
    .btn-p:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
    .btn-g { background: transparent; border: 1px solid var(--border); color: var(--muted); font-size: 0.85rem; padding: 0.6rem 1.2rem; }
    .btn-g:hover { border-color: rgba(245,197,24,0.3); color: var(--text); }
    .ffoot { display: flex; gap: 0.75rem; align-items: center; margin-top: 0.75rem; }
    .recap { background: var(--s2); border: 1px solid var(--border); border-radius: 16px; padding: 1.25rem; margin-bottom: 1.5rem; }
    .recap h4 { font-family: 'Bebas Neue', sans-serif; font-size: 1.2rem; color: var(--accent); margin-bottom: 0.75rem; }
    .prow { display: flex; align-items: center; gap: 0.75rem; padding: 0.4rem 0; border-bottom: 1px solid rgba(255,255,255,0.04); font-size: 0.85rem; color: #c9cfd8; }
    .prow:last-child { border-bottom: none; }
    .success { display: none; text-align: center; padding: 3rem 1rem; }
    .success.on { display: block; }
    .s-ico { font-size: 4rem; margin-bottom: 1rem; display: block; animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) both; }
    .success h2 { font-family: 'Bebas Neue', sans-serif; font-size: 3rem; color: var(--accent); letter-spacing: 0.05em; }

    /* GALERIE */
    .gallery-pending { text-align: center; padding: 3rem 1rem; color: var(--muted); font-size: 0.9rem; border: 1px dashed rgba(255,255,255,0.07); border-radius: 16px; margin-top: 1.5rem; }

    /* RESULTS */
    .podium { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; align-items: end; margin: 2rem 0 1.5rem; max-width: 500px; }
    .podbox { background: var(--surface); border: 1px solid var(--border); border-radius: 16px 16px 0 0; text-align: center; padding: 1.25rem 0.75rem 1rem; position: relative; overflow: hidden; }
    .podbox::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; }
    .pod1::before { background: linear-gradient(90deg, var(--a2), var(--accent)); }
    .pod2::before { background: #94a3b8; }
    .pod3::before { background: #92400e; }
    .pod1 { padding-top: 2rem; }
    .pod-medal { font-size: 2rem; display: block; margin-bottom: 0.5rem; }
    .pod-rank { font-family: 'Bebas Neue', sans-serif; font-size: 2.5rem; color: var(--accent); line-height: 1; }
    .pod-team { font-weight: 600; font-size: 0.9rem; margin-top: 0.4rem; }
    .pending-box { text-align: center; padding: 3rem 1rem; color: var(--muted); font-size: 0.9rem; border: 1px dashed rgba(255,255,255,0.07); border-radius: 16px; }
    .rtable { width: 100%; border-collapse: collapse; margin-top: 1.5rem; font-size: 0.88rem; }
    .rtable th { text-align: left; padding: 0.6rem 0.9rem; font-size: 0.68rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: var(--muted); border-bottom: 1px solid var(--border); }
    .rtable td { padding: 0.75rem 0.9rem; border-bottom: 1px solid rgba(255,255,255,0.04); color: #c9cfd8; }
    .rtable tr:last-child td { border-bottom: none; }
    .rtable tr:hover td { background: rgba(245,197,24,0.03); }
    .rb { display: inline-flex; align-items: center; justify-content: center; width: 26px; height: 26px; border-radius: 50%; font-weight: 700; font-size: 0.8rem; }
    .rb1 { background: rgba(245,197,24,0.2); color: var(--accent); }
    .rb2 { background: rgba(148,163,184,0.15); color: #94a3b8; }
    .rb3 { background: rgba(146,64,14,0.2); color: #d97706; }
    .rbo { background: var(--s2); color: var(--muted); }

    /* LEGAL */
    .legal-page { display: none; position: fixed; inset: 0; z-index: 200; background: rgba(8,9,13,0.95); backdrop-filter: blur(8px); overflow-y: auto; padding: 2rem; }
    .legal-page.show { display: block; }
    .legal-content { max-width: 800px; margin: 0 auto; background: var(--surface); border: 1px solid var(--border); border-radius: 24px; padding: 2.5rem; position: relative; }
    .legal-close { position: absolute; top: 1.5rem; right: 1.5rem; width: 32px; height: 32px; border-radius: 50%; background: var(--s2); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--muted); font-size: 1.2rem; transition: all 0.2s; }
    .legal-close:hover { background: var(--border); color: var(--text); transform: rotate(90deg); }
    .legal-h1 { font-family: 'Bebas Neue', sans-serif; font-size: 2.5rem; color: var(--accent); letter-spacing: 0.05em; margin-bottom: 1.5rem; }
    .legal-h2 { font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; color: var(--text); letter-spacing: 0.05em; margin: 2rem 0 1rem; }
    .legal-p { color: #9ca3af; font-size: 0.9rem; line-height: 1.7; margin-bottom: 1rem; }
    .legal-ul { color: #9ca3af; font-size: 0.9rem; line-height: 1.7; margin-left: 1.5rem; margin-bottom: 1rem; }
    .legal-ul li { margin-bottom: 0.5rem; }
    .legal-strong { color: var(--text); font-weight: 600; }
    .legal-box { background: rgba(245,197,24,0.05); border: 1px solid rgba(245,197,24,0.2); border-radius: 12px; padding: 1rem 1.25rem; margin: 1.5rem 0; }
    .legal-box-title { font-weight: 700; color: var(--accent); font-size: 0.85rem; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.5rem; }

    footer { position: relative; z-index: 2; text-align: center; padding: 2rem; color: var(--muted); font-size: 0.8rem; border-top: 1px solid var(--border); }

    @keyframes fadeUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes bounce { 0%, 100% { transform: rotate(45deg) translateY(0); } 50% { transform: rotate(45deg) translateY(6px); } }
    @keyframes pop { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1); } }
    .reveal { opacity: 0; transform: translateY(32px); transition: opacity 0.7s ease, transform 0.7s ease; }
    .reveal.visible { opacity: 1; transform: translateY(0); }

    @media (max-width: 520px) {
      body { padding-top: 60px; }
      .navbar { padding: 0.75rem 1rem; }
      .navbar-links { gap: 0.75rem; }
      .navbar-links a { font-size: 0.75rem; }
      .cd-grid { grid-template-columns: repeat(2, 1fr); }
      .frow { grid-template-columns: 1fr; }
      .form-card { padding: 1.5rem; }
      .teams-grid { grid-template-columns: 1fr 1fr; }
      .podium { max-width: 100%; }
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <a class="navbar-logo" href="#">POLYJUMP</a>
  <div class="navbar-links">
    <a href="#infos">Infos</a>
    <a href="#programme">Programme</a>
    <a href="#equipes">√âquipes</a>
    <a href="#inscription">S'inscrire</a>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="court">
    <svg viewBox="0 0 1200 700" preserveAspectRatio="xMidYMid slice">
      <rect x="100" y="100" width="1000" height="500" fill="none" stroke="white" stroke-width="2"/>
      <line x1="600" y1="100" x2="600" y2="600" stroke="white" stroke-width="2"/>
      <circle cx="600" cy="350" r="80" fill="none" stroke="white" stroke-width="2"/>
      <line x1="100" y1="350" x2="1100" y2="350" stroke="white" stroke-width="3"/>
      <rect x="200" y="100" width="200" height="160" fill="none" stroke="white" stroke-width="1.5"/>
      <rect x="800" y="100" width="200" height="160" fill="none" stroke="white" stroke-width="1.5"/>
      <rect x="800" y="440" width="200" height="160" fill="none" stroke="white" stroke-width="1.5"/>
      <rect x="200" y="440" width="200" height="160" fill="none" stroke="white" stroke-width="1.5"/>
    </svg>
  </div>
  <div class="hero-content">
    <div class="badge">üèê Tournoi de Volley √âtudiant</div>
    <h1 class="hero-title">POLYJUMP</h1>
    <p class="hero-sub">Tournoi √âtudiant ¬∑ √âdition 2026</p>
    <div class="hero-meta">
      <div class="pill">üìÖ 26 Mars 2026</div>
      <div class="pill">üï° 18h30</div>
      <div class="pill">üìç Salle Volley ‚Äî SUAPS</div>
      <div class="pill">üç∫ Buvette sur place</div>
      <a href="https://www.youtube.com/watch?v=RGHY4vCdowc" target="_blank" class="pill pill-discord">üí¨ Discord</a>
    </div>
  </div>
  <div class="scroll-hint"><span>D√©couvrir</span><div class="arrow"></div></div>
</section>

<!-- COUNTDOWN -->
<div class="wrap reveal">
  <p class="lbl">‚è≥ Compte √† rebours</p>
  <h2 class="ttl">Le tournoi approche</h2>
  <div class="cd-grid">
    <div class="cd-box"><div class="cd-n" id="cd-j">--</div><div class="cd-l">Jours</div></div>
    <div class="cd-box"><div class="cd-n" id="cd-h">--</div><div class="cd-l">Heures</div></div>
    <div class="cd-box"><div class="cd-n" id="cd-m">--</div><div class="cd-l">Minutes</div></div>
    <div class="cd-box"><div class="cd-n" id="cd-s">--</div><div class="cd-l">Secondes</div></div>
  </div>
</div>

<hr class="div" />

<!-- INFOS -->
<div class="wrap reveal" id="infos">
  <p class="lbl">üìã Infos pratiques</p>
  <h2 class="ttl">Tout savoir</h2>
  <div class="info-grid">
    <div class="info-card">
      <span class="ico">üèüÔ∏è</span>
      <h3>Lieu & Acc√®s</h3>
      <p>Salle de Volley du <strong>SUAPS</strong><br/>Acc√®s r√©serv√© aux √©tudiants inscrits.<br/>Pr√©sentez-vous 15 min avant le d√©but.</p>
    </div>
    <div class="info-card">
      <span class="ico">üìú</span>
      <h3>Format</h3>
      <ul>
        <li>√âquipes de 4 joueurs</li>
        <li>Phase de poules + phases finales</li>
        <li>Matchs de 15 minutes (chrono)</li>
        <li>Arbitrage par les √©quipes √©limin√©es</li>
      </ul>
    </div>
    <div class="info-card">
      <span class="ico">üìè</span>
      <h3>R√®gles</h3>
      <ul>
        <li>R√®glement officiel FIVB</li>
        <li>3 touches par √©quipe maximum</li>
        <li>Tenue sportive obligatoire</li>
        <li>Fair-play exig√© !</li>
      </ul>
    </div>
    <div class="info-card">
      <span class="ico">üç∫</span>
      <h3>Buvette</h3>
      <p>Buvette disponible sur place toute la soir√©e. Boissons fra√Æches, snacks et bonne ambiance garantis !</p>
    </div>
    <div class="info-card">
      <span class="ico">üí¨</span>
      <h3 style="color:#818cf8">Discord</h3>
      <p>Toutes les infos, le planning des matchs et les annonces seront sur notre serveur Discord.</p>
      <a href="https://www.youtube.com/watch?v=RGHY4vCdowc" target="_blank" style="display:inline-flex;align-items:center;gap:0.4rem;margin-top:1rem;background:rgba(88,101,242,0.15);border:1px solid rgba(88,101,242,0.35);color:#a5b4fc;padding:0.5rem 1.1rem;border-radius:999px;font-size:0.85rem;font-weight:600;text-decoration:none;transition:all 0.2s" onmouseover="this.style.background='rgba(88,101,242,0.25)'" onmouseout="this.style.background='rgba(88,101,242,0.15)'">Rejoindre le serveur ‚Üí</a>
    </div>
  </div>
</div>

<hr class="div" />

<!-- PROGRAMME -->
<div class="wrap reveal" id="programme">
  <p class="lbl">üïê Programme</p>
  <h2 class="ttl">Le d√©roul√© du soir</h2>
  <div class="timeline">
    <div class="tl-item">
      <div class="tl-time">18h00</div>
      <div class="tl-dot"></div>
      <div class="tl-content"><strong>Accueil des √©quipes <span class="tl-badge badge-sport">Sport</span></strong><span>V√©rification des inscriptions, paiements sur place, √©chauffement libre.</span></div>
    </div>
    <div class="tl-item">
      <div class="tl-time">18h30</div>
      <div class="tl-dot"></div>
      <div class="tl-content"><strong>Lancement du tournoi <span class="tl-badge badge-sport">Sport</span></strong><span>D√©but des matchs de poules. Matchs de 15 minutes chronom√©tr√©s.</span></div>
    </div>
    <div class="tl-item">
      <div class="tl-time">19h30</div>
      <div class="tl-dot muted"></div>
      <div class="tl-content"><strong>Ouverture de la buvette <span class="tl-badge badge-social">Social</span></strong><span>Boissons et snacks disponibles tout au long de la soir√©e.</span></div>
    </div>
    <div class="tl-item">
      <div class="tl-time">20h30</div>
      <div class="tl-dot"></div>
      <div class="tl-content"><strong>Phases finales <span class="tl-badge badge-sport">Sport</span></strong><span>Quarts de finale, demi-finales. Le niveau monte !</span></div>
    </div>
    <div class="tl-item">
      <div class="tl-time">21h30</div>
      <div class="tl-dot"></div>
      <div class="tl-content"><strong>Grande Finale <span class="tl-badge badge-sport">Sport</span></strong><span>Les deux meilleures √©quipes s'affrontent pour le titre.</span></div>
    </div>
    <div class="tl-item">
      <div class="tl-time">22h00</div>
      <div class="tl-dot" style="background:var(--a2);box-shadow:0 0 0 3px rgba(255,107,53,0.2)"></div>
      <div class="tl-content" style="border-color:rgba(255,107,53,0.2)"><strong>Podium & Cl√¥ture <span class="tl-badge badge-cloture">Cl√¥ture</span></strong><span>Remise des r√©compenses, photos souvenirs et fin de soir√©e üèÜ</span></div>
    </div>
  </div>
</div>

<hr class="div" />

<!-- √âQUIPES -->
<div class="wrap reveal" id="equipes">
  <div class="teams-head">
    <div>
      <p class="lbl">üèê √âquipes inscrites</p>
      <h2 class="ttl" style="margin-bottom:0">Les √©quipes</h2>
    </div>
    <span class="teams-cnt" id="teams-cnt"></span>
  </div>
  <div id="teams-box"><div class="empty-box">‚è≥ Chargement...</div></div>
</div>

<hr class="div" />

<!-- PARTAGE -->
<div class="wrap reveal">
  <p class="lbl">üì£ Partager</p>
  <h2 class="ttl">Invite tes amis</h2>
  <p style="color:#9ca3af;font-size:0.95rem;max-width:480px">Partage la page d'inscription avec tes co√©quipiers ou tes adversaires !</p>
  <div class="share-row">
    <a class="sbtn wa" id="sh-wa" href="#" target="_blank">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
      WhatsApp
    </a>
    <a class="sbtn tw" id="sh-tw" href="#" target="_blank">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.748l7.73-8.835L1.254 2.25H8.08l4.253 5.622zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
      X / Twitter
    </a>
    <button class="sbtn" onclick="copyLink(this)">
      <span class="toast" id="cp-toast">Copi√© !</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
      Copier le lien
    </button>
    <button class="sbtn" id="sh-native" style="display:none" onclick="nativeShare()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
      Partager
    </button>
  </div>
</div>

<hr class="div" />

<!-- PLACES -->
<div class="places-wrap reveal">
  <div class="places-box">
    <div>
      <div class="places-ttl">Places disponibles</div>
      <div class="places-n" id="pl-n">Chargement...</div>
    </div>
    <div class="bar-wrap">
      <div class="bar-track"><div class="bar-fill" id="pl-bar"></div></div>
      <div class="bar-sub" id="pl-sub"></div>
    </div>
  </div>
</div>

<!-- FORM -->
<div class="form-wrap" id="inscription">
  <p class="lbl">‚úçÔ∏è Inscription</p>
  <h2 class="ttl" style="margin-bottom:1.5rem">Inscrire mon √©quipe</h2>

  <div class="form-card" id="fc">
    <div class="dots" id="dots">
      <div class="dot on" id="d1"></div><div class="dot-line"></div>
      <div class="dot" id="d2"></div><div class="dot-line"></div>
      <div class="dot" id="d3"></div>
    </div>

    <!-- STEP 1 -->
    <div class="step on" id="s1">
      <div class="sh">1 ‚Äî Votre √©quipe</div>
      <div style="position:absolute;left:-9999px;opacity:0" aria-hidden="true">
        <input type="text" id="hp" tabindex="-1" autocomplete="off" />
      </div>

      <div class="fg">
        <label for="tn">Nom de l'√©quipe *</label>
        <input type="text" id="tn" placeholder="Ex: Les Invincibles" maxlength="60" />
        <div class="err" id="e-tn">Ce champ est requis.</div>
        <div class="mod-box">‚ö†Ô∏è <strong style="color:#9ca3af">Mod√©ration</strong> ‚Äî Tout nom d'√©quipe offensant, discriminatoire ou inappropri√© entra√Ænera une d√©sinscription imm√©diate sans remboursement. Les organisateurs se r√©servent le droit de refuser ou supprimer toute inscription ne respectant pas ces conditions.</div>
      </div>

      <div class="pblock">
        <div class="pt"><span class="pn">1</span> Capitaine</div>
        <div class="frow">
          <div class="fg"><label>Pr√©nom & Nom *</label><input type="text" id="p1n" placeholder="Jean Dupont" maxlength="60"/><div class="err" id="e-p1n">Requis.</div></div>
          <div class="fg"><label>Email *</label><input type="email" id="p1e" placeholder="jean@email.fr" maxlength="120"/><div class="err" id="e-p1e">Email invalide.</div></div>
        </div>
      </div>
      <div class="pblock">
        <div class="pt"><span class="pn">2</span> Joueur 2</div>
        <div class="frow">
          <div class="fg"><label>Pr√©nom & Nom *</label><input type="text" id="p2n" placeholder="Marie Martin" maxlength="60"/><div class="err" id="e-p2n">Requis.</div></div>
          <div class="fg"><label>Email *</label><input type="email" id="p2e" placeholder="marie@email.fr" maxlength="120"/><div class="err" id="e-p2e">Email invalide.</div></div>
        </div>
      </div>
      <div class="pblock">
        <div class="pt"><span class="pn">3</span> Joueur 3</div>
        <div class="frow">
          <div class="fg"><label>Pr√©nom & Nom *</label><input type="text" id="p3n" placeholder="Paul Bernard" maxlength="60"/><div class="err" id="e-p3n">Requis.</div></div>
          <div class="fg"><label>Email *</label><input type="email" id="p3e" placeholder="paul@email.fr" maxlength="120"/><div class="err" id="e-p3e">Email invalide.</div></div>
        </div>
      </div>
      <div class="pblock">
        <div class="pt"><span class="pn">4</span> Joueur 4</div>
        <div class="frow">
          <div class="fg"><label>Pr√©nom & Nom *</label><input type="text" id="p4n" placeholder="Sophie Leroy" maxlength="60"/><div class="err" id="e-p4n">Requis.</div></div>
          <div class="fg"><label>Email *</label><input type="email" id="p4e" placeholder="sophie@email.fr" maxlength="120"/><div class="err" id="e-p4e">Email invalide.</div></div>
        </div>
      </div>

      <button class="btn btn-p" onclick="step2()">Continuer ‚Üí</button>
    </div>

    <!-- STEP 2 -->
    <div class="step" id="s2">
      <div class="sh">2 ‚Äî Paiement</div>
      <div class="pay-box">
        <div class="price" id="price-lbl">10 ‚Ç¨</div>
        <div class="price-d">par √©quipe (4 joueurs)</div>
        <div class="pay-row">
          <button class="pbtn prim" onclick="setPay('online')">üí≥ Payer via PayPal</button>
          <button class="pbtn sec" onclick="setPay('onsite')">üíµ Payer sur place</button>
        </div>
      </div>

      <div class="paypal-qr-box" id="paypal-box">
        <div class="paypal-qr-ttl">üì± Scanner pour payer</div>
        <div class="paypal-qr-img"><img id="qr-img" src="" alt="QR Code PayPal" /></div>
        <div class="paypal-ref-box">
          <p class="paypal-ref-txt"><strong style="color:var(--text)">1.</strong> Scannez le QR code avec votre smartphone<br/><strong style="color:var(--text)">2.</strong> Indiquez <strong style="color:var(--accent)">le nom de votre √©quipe</strong> en r√©f√©rence du virement :</p>
          <div class="paypal-ref-display" id="ref-display">‚Äî</div>
          <p class="paypal-warn">‚ö†Ô∏è Sans cette r√©f√©rence, votre paiement ne pourra pas √™tre associ√© √† votre √©quipe et votre inscription pourra √™tre annul√©e.</p>
        </div>
      </div>

      <div class="pay-confirm-wrap" id="pay-confirm">
        <label style="display:flex;align-items:flex-start;gap:0.6rem;cursor:pointer;font-size:0.88rem;color:var(--text);text-transform:none;letter-spacing:0">
          <input type="checkbox" id="pay-check" style="width:auto;margin-top:0.15rem;flex-shrink:0" />
          <span>Je confirme avoir effectu√© le virement PayPal avec le nom de mon √©quipe en r√©f√©rence. Je comprends que l'inscription ne sera valid√©e qu'apr√®s v√©rification du paiement par les organisateurs.</span>
        </label>
        <div class="err" id="e-pay-check">Vous devez confirmer avoir effectu√© le paiement.</div>
      </div>

      <div class="pstatus" id="pstat"></div>
      <div class="ffoot">
        <button class="btn btn-g" onclick="gostep(1)">‚Üê Retour</button>
        <button class="btn btn-p" style="flex:1" id="btn-s3" onclick="step3()">Confirmer ‚Üí</button>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="step" id="s3">
      <div class="sh">3 ‚Äî Confirmation</div>
      <div class="recap" id="recap-box"></div>
      <div class="fg" style="margin-bottom:1.5rem">
        <label style="text-transform:none;font-size:0.88rem;letter-spacing:0;color:var(--text);cursor:pointer">
          <input type="checkbox" id="rglt" style="width:auto;margin-right:0.5rem" />
          J'accepte le r√®glement du tournoi et m'engage √† respecter les r√®gles du fair-play.
        </label>
        <div class="err" id="e-rglt">Vous devez accepter le r√®glement.</div>
      </div>
      <div class="ffoot">
        <button class="btn btn-g" onclick="gostep(2)">‚Üê Retour</button>
        <button class="btn btn-p" style="flex:1" id="btn-sub" onclick="submit()">üèê Valider l'inscription</button>
      </div>
    </div>

    <!-- SUCCESS -->
    <div class="success" id="success">
      <span class="s-ico">üèÜ</span>
      <h2>Inscription valid√©e !</h2>
      <p>Votre √©quipe <strong id="s-team"></strong> est bien inscrite au tournoi Polyjump.</p>
      <p style="margin-top:0.5rem;color:#9ca3af;font-size:0.9rem">Un email de confirmation a √©t√© envoy√© au <strong>capitaine</strong>. Pensez √† transmettre les infos √† vos co√©quipiers !</p>
      <div class="recap" id="s-recap" style="margin-top:1.5rem;text-align:left"></div>
      <p style="margin-top:1rem;color:#6b7280;font-size:0.8rem">√Ä bient√¥t le 26 mars 2026 √† la salle du SUAPS ! üèê</p>
    </div>
  </div>
</div>

<hr class="div" />

<!-- GALERIE -->
<div class="wrap reveal" id="galerie">
  <p class="lbl">üì∏ Galerie</p>
  <h2 class="ttl">Photos du tournoi</h2>
  <div id="gallery-pending" class="gallery-pending">üì∑ Les photos seront publi√©es ici apr√®s le tournoi le <strong>26 mars 2026</strong></div>
</div>

<hr class="div" />

<!-- R√âSULTATS -->
<div class="wrap reveal" id="resultats">
  <p class="lbl">üèÜ R√©sultats</p>
  <h2 class="ttl">Classement final</h2>
  <div id="res-pending" class="pending-box">üéØ Les r√©sultats seront affich√©s ici apr√®s le tournoi le <strong>26 mars 2026</strong></div>
  <div id="res-content" style="display:none">
    <div class="podium" id="podium"></div>
    <table class="rtable">
      <thead><tr><th>#</th><th>√âquipe</th><th>V</th><th>D</th><th>Pts</th></tr></thead>
      <tbody id="res-tbody"></tbody>
    </table>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <p>üèê <strong style="color:var(--accent)">POLYJUMP</strong> ¬∑ Tournoi de Volley √âtudiant ¬∑ 26 mars 2026</p>
  <p style="margin-top:0.4rem">Salle de Volley ‚Äî SUAPS ¬∑ 18h30</p>
  <p style="margin-top:1rem;font-size:0.75rem;color:#6b7280">
    <a href="#mentions" style="color:#9ca3af;text-decoration:none;margin:0 0.75rem" onmouseover="this.style.color='var(--accent)'" onmouseout="this.style.color='#9ca3af'">Mentions L√©gales</a> ¬∑ 
    <a href="#rgpd" style="color:#9ca3af;text-decoration:none;margin:0 0.75rem" onmouseover="this.style.color='var(--accent)'" onmouseout="this.style.color='#9ca3af'">Politique de Confidentialit√©</a> ¬∑ 
    <a href="#cgu" style="color:#9ca3af;text-decoration:none;margin:0 0.75rem" onmouseover="this.style.color='var(--accent)'" onmouseout="this.style.color='#9ca3af'">CGU</a>
  </p>
</footer>

<!-- LEGAL PAGES (content hidden for brevity - same as before) -->

<script>
  // CONFIG
  const TOURNAMENT_DATE = new Date('2026-03-26T18:30:00');
  const PRICE = 10;
  const PAYPAL_QR_CODE = 'paypal-qr.png';
  const FORMSPREE_ENDPOINT = 'https://formspree.io/f/VOTRE_ID';
  const SUPABASE_URL = 'https://qrixfbcqxcobwqfnnfrd.supabase.co';
  const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyaXhmYmNxeGNvYndxZm5uZnJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMjI3NTMsImV4cCI6MjA4Njg5ODc1M30.yl5w8ThDmX7zvRIWbgfh0cleoVIEO9TYxrAcBV04EK0';
  const MAX_TEAMS = 16;
  const PAGE_URL = window.location.href.split('?')[0];
  const RESULTS = [];
  
  const SB_DEMO = SUPABASE_URL.includes('VOTRE_PROJET');
  const FS_DEMO = FORMSPREE_ENDPOINT.includes('VOTRE_ID');

  // SECURITY
  function esc(s) { return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;'); }
  function clean(s, max=80) { return String(s||'').trim().slice(0,max).replace(/[<>]/g,''); }
  function isEmail(e) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e); }
  function checkRate() {
    const now = Date.now(), k = 'pj_r';
    let a = [];
    try { a = JSON.parse(sessionStorage.getItem(k)||'[]').filter(t=>now-t<600000); } catch(e) {}
    if (a.length >= 3) return false;
    a.push(now);
    try { sessionStorage.setItem(k, JSON.stringify(a)); } catch(e) {}
    return true;
  }

  // SUPABASE
  async function sb(path, opts={}) {
    const r = await fetch(SUPABASE_URL+'/rest/v1/'+path, {
      ...opts,
      headers: {
        'apikey': SUPABASE_KEY,
        'Authorization': 'Bearer ' + SUPABASE_KEY,
        'Content-Type': 'application/json',
        'Prefer': opts.prefer || '',
        ...(opts.headers || {})
      }
    });
    if (!r.ok) throw new Error('SB ' + r.status);
    const t = await r.text();
    return t ? JSON.parse(t) : null;
  }

  // COUNTDOWN
  function tick() {
    const d = TOURNAMENT_DATE - new Date();
    if (d <= 0) {
      ['cd-j','cd-h','cd-m','cd-s'].forEach(id=>document.getElementById(id).textContent='00');
      return;
    }
    document.getElementById('cd-j').textContent = String(Math.floor(d/86400000)).padStart(2,'0');
    document.getElementById('cd-h').textContent = String(Math.floor(d%86400000/3600000)).padStart(2,'0');
    document.getElementById('cd-m').textContent = String(Math.floor(d%3600000/60000)).padStart(2,'0');
    document.getElementById('cd-s').textContent = String(Math.floor(d%60000/1000)).padStart(2,'0');
  }
  tick(); setInterval(tick, 1000);

  // PLACES
  async function loadPlaces() {
    if (SB_DEMO) {
      document.getElementById('pl-n').textContent = MAX_TEAMS + ' places';
      document.getElementById('pl-sub').textContent = '0 / ' + MAX_TEAMS + ' √©quipes inscrites';
      return;
    }
    try {
      const r = await fetch(SUPABASE_URL+'/rest/v1/inscriptions?select=id', {
        headers: {
          'apikey': SUPABASE_KEY,
          'Authorization': 'Bearer ' + SUPABASE_KEY,
          'Prefer': 'count=exact',
          'Range': '0-0'
        }
      });
      const cr = r.headers.get('content-range');
      const total = cr ? parseInt(cr.split('/')[1])||0 : 0;
      const left = Math.max(0, MAX_TEAMS - total);
      const pct = Math.min(100, (total/MAX_TEAMS)*100);
      document.getElementById('pl-n').textContent = left + ' place' + (left>1?'s':'') + ' restante' + (left>1?'s':'');
      document.getElementById('pl-sub').textContent = total + ' / ' + MAX_TEAMS + ' √©quipes inscrites';
      document.getElementById('pl-bar').style.width = pct + '%';
      if (left === 0) {
        document.getElementById('pl-n').style.color = '#f87171';
        document.getElementById('pl-bar').style.background = '#f87171';
        document.getElementById('fc').innerHTML = '<div style="text-align:center;padding:3rem 1rem"><span style="font-size:3rem">üîí</span><h2 style="font-family:\'Bebas Neue\',sans-serif;font-size:2.5rem;color:#f87171;margin:1rem 0 .5rem">Complet !</h2><p style="color:var(--muted)">Toutes les places sont prises. Rejoignez le Discord pour les d√©sistements.</p></div>';
      } else if (left <= 3) {
        document.getElementById('pl-n').style.color = 'var(--a2)';
      }
    } catch(e) {
      document.getElementById('pl-n').textContent = '--';
      document.getElementById('pl-sub').textContent = 'Supabase non configur√©';
    }
  }
  loadPlaces();

  // TEAMS
  async function loadTeams() {
    const box = document.getElementById('teams-box');
    const cnt = document.getElementById('teams-cnt');
    if (SB_DEMO) {
      box.innerHTML = '<div class="empty-box">üîß Configure Supabase pour voir les √©quipes inscrites</div>';
      cnt.textContent = '0 √©quipe';
      return;
    }
    try {
      const teams = await sb('inscriptions?select=team_name,created_at&order=created_at.asc');
      const n = teams ? teams.length : 0;
      cnt.textContent = n + ' √©quipe' + (n>1?'s':'');
      if (!n) {
        box.innerHTML = '<div class="empty-box">üèê Soyez la premi√®re √©quipe √† vous inscrire !</div>';
        return;
      }
      box.innerHTML = '<div class="teams-grid">' + teams.map((t,i) => 
        '<div class="tcard" style="animation-delay:'+(i*0.05)+'s"><div class="tnum">'+(i+1)+'</div><div class="tinfo"><div class="tname">'+esc(t.team_name)+'</div></div></div>'
      ).join('') + '</div>';
    } catch(e) {
      box.innerHTML = '<div class="empty-box">Impossible de charger les √©quipes.</div>';
    }
  }
  loadTeams();

  // SHARE
  document.getElementById('sh-wa').href = 'https://wa.me/?text=' + encodeURIComponent('üèê Inscris ton √©quipe au tournoi Polyjump ! 26 mars 2026 ‚Äî SUAPS\nüëâ ' + PAGE_URL);
  document.getElementById('sh-tw').href = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent('Je participe au tournoi de volley √©tudiant Polyjump le 26 mars ! üèê ' + PAGE_URL);
  if (navigator.share) document.getElementById('sh-native').style.display = 'inline-flex';
  function copyLink(b) {
    navigator.clipboard.writeText(PAGE_URL).then(() => {
      const t = document.getElementById('cp-toast');
      t.classList.add('on');
      setTimeout(() => t.classList.remove('on'), 2000);
    });
  }
  function nativeShare() { navigator.share({title:'Polyjump ‚Äî Tournoi Volley', url:PAGE_URL}); }

  // RESULTS
  if (RESULTS && RESULTS.length) {
    document.getElementById('res-pending').style.display = 'none';
    document.getElementById('res-content').style.display = 'block';
    const m = ['ü•á','ü•à','ü•â'], top = RESULTS.slice(0,3);
    const po = [top[1],top[0],top[2]], pc = ['pod2','pod1','pod3'];
    document.getElementById('podium').innerHTML = po.map((t,i) => {
      if (!t) return '<div></div>';
      const rk = i===1?1:i===0?2:3;
      return '<div class="podbox '+pc[i]+'"><span class="pod-medal">'+m[rk-1]+'</span><div class="pod-rank">'+rk+'</div><div class="pod-team">'+esc(t.team)+'</div></div>';
    }).join('');
    document.getElementById('res-tbody').innerHTML = RESULTS.map(r => {
      const rc = r.rank<=3?'rb'+r.rank:'rbo';
      return '<tr><td><span class="rb '+rc+'">'+r.rank+'</span></td><td style="font-weight:600;color:var(--text)">'+esc(r.team)+'</td><td style="color:#34d399">'+r.wins+'</td><td style="color:#f87171">'+r.losses+'</td><td style="color:var(--accent);font-weight:600">'+(r.wins*3)+'</td></tr>';
    }).join('');
  }

  // FORM
  document.getElementById('price-lbl').textContent = PRICE + ' ‚Ç¨';
  let payChoice = null;

  function gostep(n) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('on'));
    document.getElementById('s'+n).classList.add('on');
    for (let i = 1; i <= 3; i++) {
      const d = document.getElementById('d'+i);
      d.classList.remove('on','done');
      if (i < n) d.classList.add('done');
      else if (i === n) d.classList.add('on');
    }
  }

  function setErr(fid, eid, cond) {
    const f = document.getElementById(fid), e = document.getElementById(eid);
    if (cond) {
      f.classList.add('bad');
      e.classList.add('on');
      return false;
    }
    f.classList.remove('bad');
    e.classList.remove('on');
    return true;
  }

  function step2() {
    if (document.getElementById('hp').value) return;
    let ok = true;
    ok = setErr('tn', 'e-tn', !document.getElementById('tn').value.trim()) && ok;
    [['p1n','e-p1n'],['p1e','e-p1e'],['p2n','e-p2n'],['p2e','e-p2e'],['p3n','e-p3n'],['p3e','e-p3e'],['p4n','e-p4n'],['p4e','e-p4e']].forEach(([fid,eid]) => {
      const val = document.getElementById(fid).value.trim();
      if (fid.includes('e')) ok = setErr(fid, eid, !isEmail(val)) && ok;
      else ok = setErr(fid, eid, !val) && ok;
    });
    if (ok) gostep(2);
  }

  function setPay(m) {
    payChoice = m;
    const s = document.getElementById('pstat');
    const box = document.getElementById('paypal-box');
    const confirmWrap = document.getElementById('pay-confirm');
    const refEl = document.getElementById('ref-display');
    const qrImg = document.getElementById('qr-img');
    
    if (m === 'online') {
      const teamName = document.getElementById('tn').value.trim() || '[Nom de votre √©quipe]';
      refEl.textContent = teamName;
      qrImg.src = PAYPAL_QR_CODE;
      box.style.display = 'block';
      confirmWrap.style.display = 'block';
      s.style.display = 'none';
    } else {
      box.style.display = 'none';
      confirmWrap.style.display = 'none';
      s.style.display = 'block';
      s.style.color = '#d4aa00';
      s.style.borderColor = 'rgba(245,197,24,0.3)';
      s.style.background = 'rgba(245,197,24,0.08)';
      s.textContent = 'üíµ Paiement sur place. R√®glement √† l\'accueil le 26 mars.';
    }
  }

  async function step3() {
    if (!payChoice) {
      const s = document.getElementById('pstat');
      s.style.display = 'block';
      s.style.color = '#f87171';
      s.style.borderColor = 'rgba(248,113,113,0.3)';
      s.style.background = 'rgba(248,113,113,0.05)';
      s.textContent = '‚ö†Ô∏è Veuillez choisir un mode de paiement.';
      return;
    }
    
    if (payChoice === 'online') {
      const confirmed = document.getElementById('pay-check').checked;
      if (!confirmed) {
        document.getElementById('e-pay-check').classList.add('on');
        return;
      }
      document.getElementById('e-pay-check').classList.remove('on');
    }

    const btn = document.getElementById('btn-s3');
    btn.disabled = true;
    btn.textContent = '‚è≥ V√©rification...';

    const team = document.getElementById('tn').value.trim();
    const emails = ['p1e','p2e','p3e','p4e'].map(id => document.getElementById(id).value.trim());

    let dup = null;
    if (!SB_DEMO) {
      try {
        const nc = await sb('inscriptions?team_name=eq.' + encodeURIComponent(team) + '&select=team_name');
        if (nc && nc.length > 0) {
          dup = 'team';
        } else {
          const ef = emails.map(e => 'captain_email.eq.' + encodeURIComponent(e)).join(',');
          const ec = await sb('inscriptions?or=(' + ef + ')&select=captain_email');
          if (ec && ec.length > 0) dup = 'email';
        }
      } catch(e) {}
    }

    btn.disabled = false;
    btn.textContent = 'Confirmer ‚Üí';

    if (dup === 'team') {
      const s = document.getElementById('pstat');
      s.style.display = 'block';
      s.style.color = '#f87171';
      s.style.borderColor = 'rgba(248,113,113,0.3)';
      s.style.background = 'rgba(248,113,113,0.05)';
      s.textContent = "‚ö†Ô∏è Ce nom d'√©quipe est d√©j√† pris !";
      return;
    }
    if (dup === 'email') {
      const s = document.getElementById('pstat');
      s.style.display = 'block';
      s.style.color = '#f87171';
      s.style.borderColor = 'rgba(248,113,113,0.3)';
      s.style.background = 'rgba(248,113,113,0.05)';
      s.textContent = "‚ö†Ô∏è Un de ces emails est d√©j√† inscrit !";
      return;
    }

    buildRecap();
    gostep(3);
  }

  function buildRecap() {
    const team = clean(document.getElementById('tn').value);
    const pl = ['p1n','p2n','p3n','p4n'].map((id,idx) => ({
      name: clean(document.getElementById(id).value),
      email: clean(document.getElementById(id.replace('n','e')).value, 120),
      cap: idx === 0
    }));
    const plbl = payChoice === 'online' ? 'üí≥ En ligne' : 'üíµ Sur place';
    let h = '<h4>üèê ' + esc(team) + '</h4>';
    pl.forEach((p,i) => {
      h += '<div class="prow"><span class="pn">' + (i+1) + '</span><span style="flex:1">' + esc(p.name) + (p.cap ? ' <span style="color:var(--accent);font-size:0.75rem">(Cap.)</span>' : '') + '</span><span style="color:var(--muted)">' + esc(p.email) + '</span></div>';
    });
    h += '<div class="prow" style="margin-top:0.5rem;color:var(--muted)"><span>üí∞</span><span>Paiement</span><span>' + esc(plbl) + ' ¬∑ ' + PRICE + ' ‚Ç¨</span></div>';
    document.getElementById('recap-box').innerHTML = h;
  }

  async function submit() {
    if (!document.getElementById('rglt').checked) {
      document.getElementById('e-rglt').classList.add('on');
      return;
    }
    document.getElementById('e-rglt').classList.remove('on');

    // Check capacity
    if (!SB_DEMO) {
      try {
        const r = await fetch(SUPABASE_URL+'/rest/v1/inscriptions?select=id', {
          headers: {
            'apikey': SUPABASE_KEY,
            'Authorization': 'Bearer ' + SUPABASE_KEY,
            'Prefer': 'count=exact',
            'Range': '0-0'
          }
        });
        const cr = r.headers.get('content-range');
        const total = cr ? parseInt(cr.split('/')[1])||0 : 0;
        if (total >= MAX_TEAMS) {
          alert('D√©sol√©, le tournoi est complet ! Toutes les places ont √©t√© prises.');
          return;
        }
      } catch(e) {}
    }

    if (!checkRate()) {
      alert('Trop de tentatives. Merci de patienter quelques minutes.');
      return;
    }

    const btn = document.getElementById('btn-sub');
    btn.disabled = true;
    btn.textContent = '‚è≥ Envoi en cours...';

    const team = clean(document.getElementById('tn').value);
    const players = ['p1n','p2n','p3n','p4n'].map((id,idx) => ({
      name: clean(document.getElementById(id).value),
      email: clean(document.getElementById(id.replace('n','e')).value, 120),
      role: idx === 0 ? 'Capitaine' : 'Joueur ' + (idx+1)
    }));

    if (!SB_DEMO) {
      try {
        await sb('inscriptions', {
          method: 'POST',
          prefer: 'return=minimal',
          body: JSON.stringify({
            team_name: team,
            captain_name: players[0].name,
            captain_email: players[0].email,
            player2_name: players[1].name,
            player2_email: players[1].email,
            player3_name: players[2].name,
            player3_email: players[2].email,
            player4_name: players[3].name,
            player4_email: players[3].email,
            payment_method: payChoice
          })
        });
      } catch(e) {
        btn.disabled = false;
        btn.textContent = "üèê Valider l'inscription";
        alert("Erreur d'enregistrement. V√©rifiez votre connexion.");
        return;
      }
    }

    if (!FS_DEMO) {
      try {
        const ap = {
          _subject: '[Polyjump] Inscription : ' + team,
          'Equipe': team,
          'Paiement': payChoice === 'online' ? 'En ligne' : 'Sur place'
        };
        players.forEach(p => { ap[p.role] = p.name + ' ‚Äî ' + p.email; });
        await fetch(FORMSPREE_ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
          body: JSON.stringify(ap)
        });

        const cap = players[0];
        await fetch(FORMSPREE_ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
          body: JSON.stringify({
            _replyto: cap.email,
            email: cap.email,
            _subject: '[Polyjump] Confirmation ‚Äî ' + team,
            'Bonjour': cap.name,
            'Equipe': team,
            'Joueurs': players.map(p => p.name + ' (' + p.role + ')').join(', '),
            'Date': '26 mars 2026 √† 18h30',
            'Lieu': 'Salle de Volley ‚Äî SUAPS',
            'Paiement': payChoice === 'online' ? 'En ligne' : 'Sur place',
            _template: 'table'
          })
        });
      } catch(e) { console.warn('Formspree', e); }
    }

    let h = '<h4>üèê ' + esc(team) + '</h4>';
    players.forEach((p,i) => {
      h += '<div class="prow"><span class="pn">' + (i+1) + '</span><span style="flex:1">' + esc(p.name) + (i===0 ? ' <span style="color:var(--accent);font-size:0.75rem">(Cap.)</span>' : '') + '</span><span style="color:var(--muted)">' + esc(p.email) + '</span></div>';
    });
    h += '<div class="prow" style="margin-top:0.5rem"><span>üìÖ</span><span>Tournoi</span><span style="color:var(--accent)">26 mars 2026 ¬∑ 18h30 ¬∑ SUAPS</span></div>';
    document.getElementById('s-team').textContent = team;
    document.getElementById('s-recap').innerHTML = h;
    document.getElementById('dots').style.display = 'none';
    document.getElementById('s3').classList.remove('on');
    document.getElementById('success').classList.add('on');
    document.getElementById('fc').scrollIntoView({ behavior: 'smooth', block: 'center' });

    loadPlaces();
    loadTeams();
  }

  // LEGAL (minimal implementations)
  function openLegal(page) {
    // Would implement legal pages here
  }

  // SCROLL REVEAL
  const obs = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add('visible');
        obs.unobserve(e.target);
      }
    });
  }, { threshold: 0.05, rootMargin: '0px 0px -20px 0px' });
  document.querySelectorAll('.reveal').forEach(el => obs.observe(el));
</script>

</body>
</html>

<!-- MENTIONS L√âGALES -->
<div class="legal-page" id="mentions">
  <div class="legal-content">
    <div class="legal-close" onclick="closeLegal('mentions')">√ó</div>
    <h1 class="legal-h1">Mentions L√©gales</h1>
    <h2 class="legal-h2">1. √âditeur du site</h2>
    <div class="legal-box">
      <div class="legal-box-title">üîß √Ä compl√©ter obligatoirement</div>
      <p class="legal-p"><span class="legal-strong">Nom & Pr√©nom :</span> [Ton nom complet ou nom de l'association]<br/><span class="legal-strong">Adresse :</span> [Adresse postale compl√®te]<br/><span class="legal-strong">Email :</span> [ton-email@example.com]</p>
    </div>
    <h2 class="legal-h2">2. H√©bergeur</h2>
    <p class="legal-p"><span class="legal-strong">H√©bergeur :</span> GitHub, Inc.<br/><span class="legal-strong">Adresse :</span> 88 Colin P Kelly Jr St, San Francisco, CA 94107, √âtats-Unis<br/><span class="legal-strong">Site web :</span> <a href="https://github.com" target="_blank" style="color:var(--accent)">github.com</a></p>
    <h2 class="legal-h2">3. Directeur de la publication</h2>
    <p class="legal-p">Le directeur de la publication est : <span class="legal-strong">[Ton nom]</span>, en qualit√© de responsable du tournoi Polyjump.</p>
  </div>
</div>

<!-- RGPD -->
<div class="legal-page" id="rgpd">
  <div class="legal-content">
    <div class="legal-close" onclick="closeLegal('rgpd')">√ó</div>
    <h1 class="legal-h1">Politique de Confidentialit√© (RGPD)</h1>
    <h2 class="legal-h2">1. Responsable du traitement</h2>
    <div class="legal-box">
      <div class="legal-box-title">üîß √Ä compl√©ter obligatoirement</div>
      <p class="legal-p"><span class="legal-strong">Responsable :</span> [Ton nom ou nom de l'association]<br/><span class="legal-strong">Email :</span> [ton-email@example.com]</p>
    </div>
    <h2 class="legal-h2">2. Donn√©es collect√©es</h2>
    <p class="legal-p">Lors de votre inscription au tournoi Polyjump, nous collectons :</p>
    <ul class="legal-ul">
      <li>Nom de l'√©quipe (visible publiquement)</li>
      <li>Noms et pr√©noms des joueurs (4 par √©quipe)</li>
      <li>Adresses email des joueurs</li>
      <li>Mode de paiement choisi</li>
    </ul>
    <h2 class="legal-h2">3. Vos droits</h2>
    <p class="legal-p">Vous disposez des droits d'acc√®s, de rectification, d'effacement et de portabilit√©. Pour exercer ces droits, contactez-nous √† : <span class="legal-strong">[ton-email@example.com]</span></p>
  </div>
</div>

<!-- CGU -->
<div class="legal-page" id="cgu">
  <div class="legal-content">
    <div class="legal-close" onclick="closeLegal('cgu')">√ó</div>
    <h1 class="legal-h1">Conditions G√©n√©rales d'Utilisation</h1>
    <h2 class="legal-h2">1. Inscription</h2>
    <ul class="legal-ul">
      <li>R√©serv√© aux √©tudiants</li>
      <li>√âquipes de 4 joueurs</li>
      <li>Inscription valid√©e apr√®s paiement</li>
    </ul>
    <h2 class="legal-h2">2. Tarif et paiement</h2>
    <p class="legal-p">10 ‚Ç¨ par √©quipe. Paiement en ligne (PayPal avec r√©f√©rence obligatoire) ou sur place le jour J.</p>
    <h2 class="legal-h2">3. Mod√©ration</h2>
    <p class="legal-p">Tout nom d'√©quipe offensant entra√Æne une d√©sinscription sans remboursement.</p>
  </div>
</div>

<script>
  function closeLegal(page) {
    document.getElementById(page).classList.remove('show');
    document.body.style.overflow = '';
  }
  
  if(window.location.hash) {
    const page = window.location.hash.substring(1);
    if(['mentions','rgpd','cgu'].includes(page)) {
      setTimeout(() => {
        document.getElementById(page).classList.add('show');
        document.body.style.overflow = 'hidden';
      }, 100);
    }
  }
  
  window.addEventListener('hashchange', () => {
    const page = window.location.hash.substring(1);
    if(['mentions','rgpd','cgu'].includes(page)) {
      document.getElementById(page).classList.add('show');
      document.body.style.overflow = 'hidden';
    } else {
      ['mentions','rgpd','cgu'].forEach(p => closeLegal(p));
    }
  });
</script>

